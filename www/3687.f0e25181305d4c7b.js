"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(y,p,l)=>{l.r(p),l.d(p,{LoginPageModule:()=>L});var _=l(3609),c=l(209),n=l(6242),d=l(185),m=l(6814),g=l(9004),u=l(95);function f(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"ion-input",12),n.NdJ("keyup",function(t){n.CHM(i);const r=n.oxw(2);return n.KtG(r.eventHandler(t.keyCode))})("ngModelChange",function(t){n.CHM(i);const r=n.oxw(2);return n.KtG(r.confirmPin=t)}),n.qZA()}if(2&e){const i=n.oxw(2);n.Q6J("ngModel",i.confirmPin)}}function h(e,a){if(1&e&&(n.TgZ(0,"ion-row")(1,"ion-col",4),n.YNc(2,f,1,1,"ion-input",11),n.qZA()()),2&e){const i=n.oxw();n.xp6(2),n.Q6J("ngIf",i.showConfirmPin)}}function P(e,a){1&e&&(n.TgZ(0,"span"),n._uU(1,"Account Not Found"),n.qZA())}function C(e,a){1&e&&(n.TgZ(0,"span"),n._uU(1,"Account exsist"),n.qZA())}function x(e,a){1&e&&(n.TgZ(0,"span"),n._uU(1,"Your Account has been disabled please contact business owner"),n.qZA())}function T(e,a){if(1&e&&(n.TgZ(0,"div",13),n.YNc(1,P,2,0,"span",7)(2,C,2,0,"span",7)(3,x,2,0,"span",7),n.qZA()),2&e){const i=n.oxw();n.xp6(1),n.Q6J("ngIf",404==i.resCode),n.xp6(1),n.Q6J("ngIf",409==i.resCode),n.xp6(1),n.Q6J("ngIf",403==i.resCode)}}function v(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"ion-button",14),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.login())}),n._uU(1,"Login"),n.qZA()}}function w(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"ion-button",14),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.createCustomer())}),n._uU(1,"Create"),n.qZA()}}const b=[{path:"",component:(()=>{var e;class a{constructor(o,t){this.route=o,this.auth=t,this.profileType="customer",this.showConfirmPin=!1,this.mobileNumber="",this.pin="",this.confirmPin="",this.resCode=0}ngOnInit(){}eventHandler(o){this.resCode=0}login(){this.auth.login({mobile:this.mobileNumber,pin:this.pin}).subscribe(o=>{var t,r,s;this.resCode=o.status,"admin"==(null===(t=o.userData)||void 0===t?void 0:t.role)&&(o.userData.activeUser=!0),null!==(r=o.userData)&&void 0!==r&&r.activeUser||(this.resCode=403),o.success&&null!==(s=o.userData)&&void 0!==s&&s.activeUser&&(localStorage.setItem("token",JSON.stringify(o.token)),localStorage.setItem("userData",JSON.stringify(o.userData)),this.navigatePages())},o=>{this.resCode=o.status,console.log(o)})}createAccount(){this.showConfirmPin=!0}goBackToLogin(){this.showConfirmPin=!1}createCustomer(){this.pin==this.confirmPin?this.auth.createCustomer({mobile:this.mobileNumber,pin:this.pin,role:this.profileType}).subscribe(o=>{this.resCode=o.status,o.success&&(this.showConfirmPin=!1,localStorage.setItem("token",JSON.stringify(o.token)),localStorage.setItem("userData",JSON.stringify(o.userData)),this.navigatePages())},o=>{this.resCode=o.status,console.log(o)}):console.log("pin not matched, show error message")}navigatePages(){let o=localStorage.getItem("userData");if(o){let t=JSON.parse(o);"admin"==t.role?this.route.navigate(["/adminDashboard"]):"maker"==t.role?this.route.navigate(["/makerDashboard"]):"customer"==t.role&&this.route.navigate([t.firstTimeLogin?"/customerProfile":"/customerListings"])}}}return(e=a).\u0275fac=function(o){return new(o||e)(n.Y36(c.F0),n.Y36(d.u))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],decls:28,vars:7,consts:[[1,"login-container"],[1,"kd_center_align"],["src","../../assets/sample_food_img.webp","alt","Food Image",1,"login-image"],[1,"login-heading"],[1,"kd_margin_bott_10"],["type","tel","pattern","[0-9]*","minlength","10","maxlength","10","placeholder","Enter Mobile",1,"input_selection",3,"ngModel","keyup","ngModelChange"],["type","tel","pattern","[0-9]*","minlength","6","maxlength","6","placeholder","Enter Pin",1,"input_selection",3,"ngModel","keyup","ngModelChange"],[4,"ngIf"],["class","error",4,"ngIf"],["expand","full","shape","round","color","primary",3,"click",4,"ngIf"],[1,"line",3,"click"],["class","input_selection","pattern","[0-9]*","minlength","6","maxlength","6","placeholder","Confirm Pin",3,"ngModel","keyup","ngModelChange",4,"ngIf"],["pattern","[0-9]*","minlength","6","maxlength","6","placeholder","Confirm Pin",1,"input_selection",3,"ngModel","keyup","ngModelChange"],[1,"error"],["expand","full","shape","round","color","primary",3,"click"]],template:function(o,t){1&o&&(n.TgZ(0,"div",0)(1,"ion-row")(2,"ion-col",1),n._UZ(3,"img",2),n.qZA()(),n.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-text",3),n._uU(7,"Mobile Number"),n.qZA()()(),n.TgZ(8,"ion-row")(9,"ion-col",4)(10,"ion-input",5),n.NdJ("keyup",function(s){return t.eventHandler(s.keyCode)})("ngModelChange",function(s){return t.mobileNumber=s}),n.qZA()()(),n.TgZ(11,"ion-row")(12,"ion-col")(13,"ion-text",3),n._uU(14,"Pin Setup"),n.qZA()()(),n.TgZ(15,"ion-row")(16,"ion-col",4)(17,"ion-input",6),n.NdJ("keyup",function(s){return t.eventHandler(s.keyCode)})("ngModelChange",function(s){return t.pin=s}),n.qZA()()(),n.YNc(18,h,3,1,"ion-row",7)(19,T,4,3,"div",8),n.TgZ(20,"ion-row")(21,"ion-col"),n.YNc(22,v,2,0,"ion-button",9)(23,w,2,0,"ion-button",9),n.qZA()(),n.TgZ(24,"ion-row")(25,"ion-col",1)(26,"ion-text",10),n.NdJ("click",function(){return t.showConfirmPin?t.goBackToLogin():t.createAccount()}),n._uU(27),n.qZA()()()()),2&o&&(n.xp6(10),n.Q6J("ngModel",t.mobileNumber),n.xp6(7),n.Q6J("ngModel",t.pin),n.xp6(1),n.Q6J("ngIf","customer"===t.profileType),n.xp6(1),n.Q6J("ngIf",t.resCode),n.xp6(3),n.Q6J("ngIf",!t.showConfirmPin),n.xp6(1),n.Q6J("ngIf",t.showConfirmPin),n.xp6(4),n.hij(" ",t.showConfirmPin?"Go To Login":"Create Account"," "))},dependencies:[m.O5,g.YG,g.wI,g.pK,g.Nd,g.yW,g.j9,u.JJ,u.wO,u.nD,u.c5,u.On],styles:[".login-container[_ngcontent-%COMP%]{min-width:390px;margin:auto;padding:15px;overflow:auto}.login-image[_ngcontent-%COMP%]{width:100%;border-radius:10px;margin-bottom:20px}.login-heading[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.input_selection[_ngcontent-%COMP%]{border:solid 1px black;border-radius:7px;min-height:48px;box-shadow:none;--padding-start: 10px;margin-top:8px}.line[_ngcontent-%COMP%]{font-size:20px!important;font-weight:700;color:#00f;text-align:end}.error[_ngcontent-%COMP%]{color:red;font-size:10px;text-align:center}"]}),a})()}];let M=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[c.Bz.forChild(b),c.Bz]}),a})(),L=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[_.m,M]}),a})()}}]);