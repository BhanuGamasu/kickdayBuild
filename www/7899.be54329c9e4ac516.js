"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7899],{7899:(S,_,a)=>{a.r(_),a.d(_,{CustomerOrderSummaryPageModule:()=>C});var c=a(6814),f=a(95),d=a(9004),u=a(209),m=a(5861),h=a(1273),e=a(6242),p=a(4414),x=a(5565),y=a(6593);function v(r,n){if(1&r&&(e.TgZ(0,"ion-row",16)(1,"ion-col",17)(2,"ion-text",21),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col",19)(5,"ion-text",35),e._uU(6),e._UZ(7,"ion-icon",36),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",37)(10,"ion-text",38),e._uU(11),e.qZA()()()),2&r){const i=n.$implicit;e.xp6(3),e.Oqu(i.name),e.xp6(3),e.hij("\u20b9 ",i.price," "),e.xp6(2),e.Oqu(i.count),e.xp6(3),e.hij(" = $",i.individualItemCost,"")}}function Z(r,n){1&r&&(e.TgZ(0,"ion-text",39),e._uU(1,"Delivery Location"),e.qZA())}function A(r,n){1&r&&(e.TgZ(0,"ion-text",39),e._uU(1,"Pickup Location"),e.qZA())}function T(r,n){if(1&r){const i=e.EpF();e.TgZ(0,"ion-content",6)(1,"div",7)(2,"ion-row")(3,"ion-col",8)(4,"div",9)(5,"ion-text",10),e._uU(6,"R"),e.qZA()(),e.TgZ(7,"ion-text",11)(8,"span",10),e._uU(9),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"span"),e._uU(12),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"span"),e._uU(15),e.qZA()()()(),e.TgZ(16,"ion-row")(17,"ion-col",12)(18,"ion-text",10),e._uU(19,"Mutton Biryani With paya preparation on weekend do not miss it."),e.qZA()()(),e.TgZ(20,"ion-row")(21,"ion-col",13)(22,"div",14),e.YNc(23,v,12,4,"ion-row",15),e.TgZ(24,"ion-row",16)(25,"ion-col",17)(26,"ion-text",18),e._uU(27),e.qZA()(),e.TgZ(28,"ion-col",19)(29,"ion-text",20),e._uU(30),e.qZA()()(),e.TgZ(31,"ion-row",16)(32,"ion-col",17)(33,"ion-text",18),e._uU(34,"GST"),e.qZA()(),e.TgZ(35,"ion-col",19)(36,"ion-text",20),e._uU(37,"$0"),e.qZA()()(),e.TgZ(38,"ion-row",16)(39,"ion-col",17)(40,"ion-text",21),e._uU(41,"Total"),e.qZA()(),e.TgZ(42,"ion-col",19)(43,"ion-text",21),e._uU(44),e.qZA()()()()()(),e.TgZ(45,"ion-row",22)(46,"ion-col")(47,"div",8),e._UZ(48,"ion-icon",23),e.YNc(49,Z,2,0,"ion-text",24)(50,A,2,0,"ion-text",24),e.qZA()(),e.TgZ(51,"ion-col",25),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.openAddressList())}),e.TgZ(52,"ion-button",26),e._uU(53,"Change Address"),e.qZA()()(),e.TgZ(54,"ion-row")(55,"ion-col"),e._UZ(56,"ion-text",27),e.qZA()(),e.TgZ(57,"ion-row",28)(58,"ion-col",29)(59,"div",30),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.copyLocationUrl())}),e._UZ(60,"ion-icon",31),e.TgZ(61,"ion-text",32),e._uU(62,"Copy"),e.qZA()(),e.TgZ(63,"ion-button",33),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.redirectToGoogleMaps())}),e._uU(64,"Get Directions"),e.qZA()()(),e.TgZ(65,"ion-button",34),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.placeOrder())}),e._uU(66,"PAY NOW"),e.qZA()()()}if(2&r){const i=e.oxw();e.Q6J("fullscreen",!0),e.xp6(9),e.hij("Maker ",i.orderData.makerData.ID,""),e.xp6(3),e.Oqu(i.orderData.makerData.userName),e.xp6(3),e.Oqu(i.orderData.makerData.address),e.xp6(8),e.Q6J("ngForOf",i.orderData.orderedItems),e.xp6(4),e.hij("Delivery (",i.orderData.deliveryOption.type,")"),e.xp6(3),e.hij("\u20b9 ",i.orderData.deliveryOption.price,""),e.xp6(14),e.hij("$",i.orderData.finalCostWithOutDeliveryOption,""),e.xp6(5),e.Q6J("ngIf","Pickup Available"!=i.orderData.deliveryOption.type),e.xp6(1),e.Q6J("ngIf","Pickup Available"==i.orderData.deliveryOption.type),e.xp6(6),e.Q6J("innerHTML",i.getSanitizedLocationUrl(),e.oJD)}}function O(r,n){1&r&&(e.TgZ(0,"ion-content",6),e._uU(1," data not found\n"),e.qZA()),2&r&&e.Q6J("fullscreen",!0)}const U=[{path:"",component:(()=>{var r;class n{constructor(t,o,s,l,g,w){this.router=t,this.model=o,this.alert=s,this.adminService=l,this.sanitizer=g,this.alertController=w,this._id="",this.addressList=[]}ngOnInit(){}ngAfterViewInit(){this._id=this.router.url.split("/")[2],this.adminService.getCustomerAddress({}).subscribe(t=>{var o;this.addressList=t.data||[],this.selectedAddress=null===(o=this.addressList)||void 0===o?void 0:o.find(s=>s.default)},t=>{this.addressList=[]}),this.adminService.getCustomerOrderSummary({_id:this._id}).subscribe(t=>{this.orderData=!(!t.success||!t.data)&&t.data},t=>{this.orderData=!1,this.openAlert("ERROR","something went wrong please try again later",["close"])})}openAddressList(){var t=this;return(0,m.Z)(function*(){const o=yield t.model.create({component:h.z});o.present();const{data:s}=yield o.onWillDismiss();s&&s._id&&(t.selectedAddress=s)})()}goBack(){this.orderData.refListingId?this.router.navigateByUrl("/customerListings/"+this.orderData.refListingId):this.router.navigate(["/customerListings"])}placeOrder(){var t;null!==(t=this.selectedAddress)&&void 0!==t&&t._id?this.adminService.placeOrder({_id:this._id,deliveryAddress:this.selectedAddress}).subscribe(o=>{o.success&&this.router.navigate(["/orders"])},o=>{410==o.status?this.openAlert("OUT OF STOCK","We're sorry, but some items in your order are currently out of stock. We're working to restock our inventory soon. Please remove the out-of-stock items or adjust the quantities, or contact our support team for further assistance. Thank you for your understanding.",["close"]):this.openAlert("ERROR","something went wrong please try again later",["close"])}):console.log("address not found")}openAlert(t,o,s){var l=this;return(0,m.Z)(function*(){yield(yield l.alert.create({header:t,message:o,buttons:s,mode:"ios"})).present()})()}getSanitizedLocationUrl(){var t;let o=(null===(t=this.selectedAddress)||void 0===t?void 0:t.LocationUrl)||"";return!o&&this.orderData&&this.orderData.deliveryAddress&&(o=this.orderData.deliveryAddress.LocationUrl||""),this.sanitizer.bypassSecurityTrustHtml(o.replace(/,/g,",<br>"))}copyLocationUrl(){var t=this;return(0,m.Z)(function*(){var o;const s=null===(o=t.selectedAddress)||void 0===o?void 0:o.LocationUrl;if(s){const l=document.createElement("input");l.value=s,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),yield(yield t.alertController.create({header:"Copied!",message:"Location URL copied successfully",buttons:["OK"]})).present()}})()}redirectToGoogleMaps(){var t,o;null!==(t=this.selectedAddress)&&void 0!==t&&t.LocationUrl&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(null===(o=this.selectedAddress)||void 0===o?void 0:o.LocationUrl)}`,"_blank")}}return(r=n).\u0275fac=function(t){return new(t||r)(e.Y36(u.F0),e.Y36(p.IN),e.Y36(p.Br),e.Y36(x.l),e.Y36(y.H7),e.Y36(p.Br))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-customer-order-summary"]],decls:9,vars:3,consts:[[2,"box-shadow","none",3,"translucent"],[2,"padding","5px 10px 0px 10px"],["name","bag-handle-outline",1,"kd_svg_size"],[1,"kd_flex","kd_end_align",3,"click"],["name","close-outline",1,"kd_svg_size"],[3,"fullscreen",4,"ngIf"],[3,"fullscreen"],[2,"margin","15px"],[1,"kd_flex"],[1,"first_letter_styles"],[2,"font-weight","bold"],[2,"padding-left","20px","font-size","13px"],[2,"margin-top","10px"],[1,"kd_flex_row_center",2,"margin","5px 0px"],[2,"border","solid 2px","border-radius","14px","padding","10px","background-color","#f7f7f7"],["class","kd_flex kd_center_align",4,"ngFor","ngForOf"],[1,"kd_flex","kd_center_align"],["size","8"],[2,"font-size","14px","color","#777"],["size","4",1,"kd_flex","kd_end_align"],[2,"font-size","14px","color","#555"],[2,"font-size","16px","font-weight","bold"],[2,"margin-top","15px","display","flex","align-items","center"],["name","home-outline",1,"icon_style"],["style","font-weight: bold; font-size: 18px;",4,"ngIf"],[1,"ion-no-padding",3,"click"],[2,"margin","0px"],[2,"font-size","14px",3,"innerHTML"],[2,"margin","20px 0px"],[1,"kd_center_align_items"],[1,"kd_center_align_items",3,"click"],["name","copy-outline",2,"height","30px","width","30px"],[2,"margin-left","5px"],[2,"margin-left","35px","width","fit-content",3,"click"],[2,"width","100%","margin-top","10%",3,"click"],[1,"kd_flex",2,"font-size","14px","color","black","font-weight","bold"],["name","close-outline",1,"icon_style",2,"padding-right","5px","padding-left","5px"],[1,"kd_flex","kd_end_align","ion-no-padding",2,"padding-right","5px","padding-bottom","10px"],[2,"font-weight","bold","font-size","14px"],[2,"font-weight","bold","font-size","18px"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row",1)(3,"ion-col"),e._UZ(4,"ion-icon",2),e.qZA(),e.TgZ(5,"ion-col",3),e.NdJ("click",function(){return o.goBack()}),e._UZ(6,"ion-icon",4),e.qZA()()()(),e.YNc(7,T,67,11,"ion-content",5)(8,O,2,1,"ion-content",5)),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("ngIf",o.orderData),e.xp6(1),e.Q6J("ngIf",0==o.orderData))},dependencies:[c.sg,c.O5,d.YG,d.wI,d.W2,d.Gu,d.gu,d.Nd,d.yW,d.sr]}),n})()}];let k=(()=>{var r;class n{}return(r=n).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.Bz.forChild(U),u.Bz]}),n})(),C=(()=>{var r;class n{}return(r=n).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,f.u5,d.Pc,k]}),n})()}}]);