"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3769],{3769:(P,u,l)=>{l.r(u),l.d(u,{CustomerListingOverviewPageModule:()=>A});var m=l(3609),d=l(2436),p=l(5861),e=l(5678),_=l(4414),c=l(9004),f=l(5565),g=l(6814),v=l(95),h=l(9172);const x=["swiper"];function w(n,a){if(1&n){const o=e.EpF();e.TgZ(0,"ion-icon",33),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.favItem())}),e.qZA()}}function C(n,a){if(1&n){const o=e.EpF();e.TgZ(0,"ion-icon",34),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.unFavItem())}),e.qZA()}}function Z(n,a){if(1&n&&(e.TgZ(0,"swiper-slide"),e._UZ(1,"img",35),e.ALo(2,"async"),e.ALo(3,"getLogo"),e.qZA()),2&n){const o=a.$implicit;e.xp6(1),e.Q6J("src",e.lcZ(2,1,e.lcZ(3,3,o)),e.LSH)}}function y(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.BQk()),2&n){const o=e.oxw();e.xp6(2),e.Oqu(o.listingData.makerData.userName)}}function O(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw();e.xp6(2),e.Oqu(o.listingData.makerData.address)}}function T(n,a){if(1&n){const o=e.EpF();e.TgZ(0,"ion-row",27)(1,"ion-col",36)(2,"ion-text"),e._uU(3),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"div",37)(6,"ion-text"),e._uU(7),e.qZA()()(),e.TgZ(8,"ion-col",38)(9,"ion-text"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-col",39)(12,"ion-button",40)(13,"ion-button",41),e.NdJ("click",function(){const r=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.decrementCount(r))}),e._UZ(14,"ion-icon",42),e.qZA(),e.TgZ(15,"span",43),e._uU(16),e.qZA(),e.TgZ(17,"ion-button",44),e.NdJ("click",function(){const r=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.incrementCount(r))}),e._UZ(18,"ion-icon",45),e.qZA()()(),e.TgZ(19,"ion-col",46)(20,"ion-text"),e._uU(21),e.qZA()()()}if(2&n){const o=a.$implicit;e.xp6(3),e.Oqu(o.name),e.xp6(4),e.hij("",o.quantity-o.count," Left"),e.xp6(3),e.hij("\u20b9 ",o.price,""),e.xp6(6),e.Oqu(o.count),e.xp6(1),e.Q6J("disabled",o.count>=o.quantity),e.xp6(4),e.hij("Individual Item Cost: \u20b9 ",o.individualItemCost,"")}}const b=n=>({"selected-button":n});function k(n,a){if(1&n){const o=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){const r=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.selectDeliveryType(r.type))}),e.TgZ(1,"ion-row")(2,"ion-col",48),e._UZ(3,"ion-icon",49),e.TgZ(4,"ion-text",50),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-row")(7,"ion-col",51)(8,"ion-text",52),e._uU(9,"Delivered on "),e._UZ(10,"br"),e._uU(11," 24th May 2:30PM"),e.qZA()()()()}if(2&n){const o=a.$implicit,i=e.oxw();e.ekj("selected",i.selectedDeliveryType===o.type),e.Q6J("ngClass",e.VKq(4,b,i.selectedDeliveryType===o.type)),e.xp6(5),e.Oqu(o.type)}}const D=[{path:"",component:(()=>{var n;class a{constructor(i,t,r,s){this.router=i,this.model=t,this.alert=r,this.adminService=s,this._id="",this.listingData={},this.totalCost=0,this.note="",this.swiperHeight="240px",this.selectedDeliveryType=null}ngOnInIt(){}swiperReady(){var i;this.swiper=null===(i=this.swiperRef)||void 0===i?void 0:i.nativeElement.swiper}ionViewWillEnter(){this._id=this.router.url.split("/")[2],this.listingData={},this.totalCost=0,this.selectedDeliveryType="",this.note="",this.adminService.getListingForUser({_id:this._id}).subscribe(i=>{i.success&&i.data?(this.listingData=i.data||{},this.swiperHeight="241px",this.listingData.listingOrders.forEach(t=>{t.count=void 0!==t.quantity?0:t.quantity,t.individualItemCost=t.price*t.count||0}),this.calculateTotalCost()):this.navigateToListings()},i=>{this.navigateToListings()})}selectDeliveryType(i){this.selectedDeliveryType=i}swiperSlideChanged(i){console.log("changed: ",i)}favItem(){this.adminService.setFavItem({_id:this._id}).subscribe(i=>{i.success&&(this.listingData.favourite=!0)},i=>{console.log(i)})}unFavItem(){this.adminService.setUnFavItem({_id:this._id}).subscribe(i=>{i.success&&(this.listingData.favourite=!1)},i=>{console.log(i)})}incrementCount(i){i&&"count"in i&&"quantity"in i?i.count<i.quantity&&(i.count=(i.count||0)+1,i.individualItemCost=i.price*i.count||0,this.calculateTotalCost()):console.warn("Order object or its properties are undefined or missing.")}decrementCount(i){i.count&&i.count>0&&(i.count--,i.individualItemCost=i.price*i.count||0,this.calculateTotalCost())}calculateTotalCost(){this.totalCost=this.listingData.listingOrders.reduce((i,t)=>i+t.individualItemCost||0,0)}addToCart(){let i=this.listingData.listingOrders.filter(s=>s.count),t=this.listingData.deliveryOptions.find(s=>s.type==this.selectedDeliveryType);this.totalCost&&this.selectedDeliveryType?this.adminService.addToCart({refListingId:this.listingData._id,refMakerId:this.listingData.refMakerId,deliveryOption:t,note:this.note,finalCostWithOutDeliveryOption:this.totalCost,orderedItems:i}).subscribe(s=>{s.success&&s._id?this.router.navigateByUrl("/orderSummary/"+s._id):this.openAlert("ERROR","something went wrong please try again later",["close"])},s=>{this.openAlert("ERROR","something went wrong please try again later",["close"])}):console.log("Please select")}navigateToListings(){this.router.navigate(["/customerListings"])}openAlert(i,t,r){var s=this;return(0,p.Z)(function*(){yield(yield s.alert.create({header:i,message:t,buttons:r,mode:"ios"})).present()})()}goBack(){var i=this;return(0,p.Z)(function*(){var t;let r=null===(t=i.listingData)||void 0===t||null===(t=t.listingOrders)||void 0===t?void 0:t.filter(s=>s.count);if(console.log(r),r.length){const s=yield i.adminService.presentDeleteConfirmation("Confirm","Sure you want to cancel the order?","");console.log({confirmed:s}),s&&i.router.navigate(["/customerListings"])}else i.router.navigate(["/customerListings"])})()}}return(n=a).\u0275fac=function(i){return new(i||n)(e.Y36(d.F0),e.Y36(_.IN),e.Y36(_.Br),e.Y36(f.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-customer-listing-overview"]],viewQuery:function(i,t){if(1&i&&e.Gf(x,5),2&i){let r;e.iGM(r=e.CRH())&&(t.swiperRef=r.first)}},decls:67,vars:27,consts:[[2,"box-shadow","none",3,"translucent"],[2,"margin","10px"],[2,"display","flex","justify-content","start","align-items","center"],["name","arrow-back-outline",1,"kd_svg_size",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],["name","star-outline","class","kd_svg_size",3,"click",4,"ngIf"],["name","star","class","kd_svg_size","style","color:blue",3,"click",4,"ngIf"],["name","share-social-outline",1,"kd_svg_size"],[2,"display","flex","justify-content","end","align-items","center"],["name","bag-handle-outline",1,"kd_svg_size"],[3,"fullscreen"],[2,"margin","15px"],[2,"border","solid 1px lightgray","border-radius","14px"],[2,"overflow","hidden",3,"loop","pagination","slidesPerView","slidesPerGroup","afterinit","change"],["swiper",""],[4,"ngFor","ngForOf"],["size","5",1,"kd_center_align_items"],["name","bag-handle-outline",1,"icon_style",2,"padding-bottom","6px"],[2,"margin-top","3px"],["name","calendar-outline",1,"icon_style"],[1,"kd_flex"],[1,"first_letter_styles"],[2,"font-weight","bold"],[2,"padding-left","20px","font-size","13px"],[4,"ngIf"],[2,"font-size","22px","font-weight","600"],["style","padding-top: 15px;",4,"ngFor","ngForOf"],[2,"padding-top","15px"],["placeholder","Note",1,"custom-textarea",3,"ngModel","ngModelChange"],[1,"scroll_width"],[2,"overflow-x","auto","white-space","nowrap","display","flex","margin","5px"],["style","border: solid 2px; border-radius: 14px; padding: 10px 0px; margin-right: 15px;",3,"selected","ngClass","click",4,"ngFor","ngForOf"],[3,"click"],["name","star-outline",1,"kd_svg_size",3,"click"],["name","star",1,"kd_svg_size",2,"color","blue",3,"click"],[3,"src"],["size","7"],[2,"padding-top","5px"],["size","2",1,"kd_flex","kd_center_align"],["size","3",1,"kd_flex","kd_end_align"],[1,"count_button"],[1,"count_button",2,"--border-radius","0px","--background","white","--background-activated","#bcc4e8",3,"click"],["name","remove-outline"],[1,"count",2,"padding","0px 8px"],[1,"count_button",2,"--border-radius","0px","--background","white","--background-activated","#bcc4e8",3,"disabled","click"],["name","add-outline"],["size","12",1,"kd_flex","kd_end_align"],[2,"border","solid 2px","border-radius","14px","padding","10px 0px","margin-right","15px",3,"ngClass","click"],[1,"kd_flex","kd_center_align"],["name","home-outline",1,"icon_style",2,"padding-right","5px"],[2,"font-size","12px","font-weight","bold"],[2,"text-align","center"],[1,"kd_font_size_12"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row",1)(3,"ion-col",2)(4,"ion-icon",3),e.NdJ("click",function(){return t.goBack()}),e.qZA()(),e.TgZ(5,"ion-col",4),e.YNc(6,w,1,0,"ion-icon",5)(7,C,1,0,"ion-icon",6),e.qZA(),e.TgZ(8,"ion-col",4),e._UZ(9,"ion-icon",7),e.qZA(),e.TgZ(10,"ion-col",8),e._UZ(11,"ion-icon",9),e.qZA()()()(),e.TgZ(12,"ion-content",10)(13,"div",11)(14,"div",12)(15,"swiper-container",13,14),e.NdJ("afterinit",function(){return t.swiperReady()})("change",function(s){return t.swiperSlideChanged(s)}),e.YNc(17,Z,4,5,"swiper-slide",15),e.qZA()(),e.TgZ(18,"ion-row")(19,"ion-col",16),e._UZ(20,"ion-icon",17),e.TgZ(21,"ion-text"),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col")(25,"ion-text"),e._uU(26,"Order Delivered On"),e.qZA(),e.TgZ(27,"div",18),e._UZ(28,"ion-icon",19),e.TgZ(29,"ion-text"),e._uU(30),e.ALo(31,"date"),e.qZA()()(),e.TgZ(32,"ion-col",20)(33,"div",21)(34,"ion-text",22),e._uU(35,"R"),e.qZA()(),e.TgZ(36,"ion-text",23)(37,"span",22),e._uU(38),e.qZA(),e._UZ(39,"br"),e.YNc(40,y,4,1,"ng-container",24)(41,O,3,1,"ng-container",24),e.qZA()()(),e.TgZ(42,"ion-row")(43,"ion-col")(44,"ion-text",25),e._uU(45),e.qZA()()(),e.TgZ(46,"ion-row")(47,"ion-col")(48,"ion-text"),e._uU(49,"Order Ends On"),e.qZA(),e.TgZ(50,"div",18),e._UZ(51,"ion-icon",19),e.TgZ(52,"ion-text"),e._uU(53),e.ALo(54,"date"),e.qZA()()()(),e.YNc(55,T,22,6,"ion-row",26),e.TgZ(56,"ion-row")(57,"ion-col",27)(58,"ion-textarea",28),e.NdJ("ngModelChange",function(s){return t.note=s}),e.qZA()()(),e.TgZ(59,"ion-row")(60,"ion-toolbar",29)(61,"div",30),e.YNc(62,k,12,6,"button",31),e.qZA()()(),e.TgZ(63,"ion-row")(64,"ion-col")(65,"ion-button",32),e.NdJ("click",function(){return t.addToCart()}),e._uU(66,"ADD TO CART"),e.qZA()()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",!t.listingData.favourite),e.xp6(1),e.Q6J("ngIf",t.listingData.favourite),e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(3),e.Udp("height",t.swiperHeight),e.Q6J("loop",!0)("pagination",!0)("slidesPerView",1)("slidesPerGroup",1),e.xp6(2),e.Q6J("ngForOf",t.listingData.imageArray),e.xp6(5),e.Oqu(t.listingData.category),e.xp6(8),e.Oqu(e.xi3(31,21,t.listingData.orderDeliveredOn,"d MMMM EEE")),e.xp6(8),e.hij("Maker (",t.listingData.ID,")"),e.xp6(2),e.Q6J("ngIf",t.listingData.makerData),e.xp6(1),e.Q6J("ngIf",t.listingData.makerData),e.xp6(4),e.Oqu(t.listingData.label),e.xp6(8),e.Oqu(e.xi3(54,24,t.listingData.orderEndsOn,"dd MMMM EEE hh:mm a")),e.xp6(2),e.Q6J("ngForOf",t.listingData.listingOrders),e.xp6(3),e.Q6J("ngModel",t.note),e.xp6(4),e.Q6J("ngForOf",t.listingData.deliveryOptions))},dependencies:[g.mk,g.sg,g.O5,c.YG,c.wI,c.W2,c.Gu,c.gu,c.Nd,c.yW,c.g2,c.sr,c.j9,v.JJ,v.On,h.n,g.Ov,g.uU],styles:["ion-textarea.custom-textarea[_ngcontent-%COMP%]{--color: black;padding:10px;border-radius:14px;--placeholder-color: black;--placeholder-opacity: .8;border:black;border-style:solid;border-width:1px}.location_type_div[_ngcontent-%COMP%]{--background: white;text-align:left;font-size:12px;border:solid 1px;border-radius:14px;min-height:75.2px;min-width:150px;padding:8px;font-weight:700}.ripple-parent[_ngcontent-%COMP%]{position:relative;overflow:hidden}swiper-container[_ngcontent-%COMP%]{--swiper-pagination-bullet-inactive-color: var(--ion-color-step-500, white);--swiper-theme-color: #0aa26d}.selected-button[_ngcontent-%COMP%]{background-color:#add8e6;color:#00008b}"]}),a})()}];let L=(()=>{var n;class a{}return(n=a).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(D),d.Bz]}),a})(),A=(()=>{var n;class a{}return(n=a).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.m,L]}),a})()}}]);