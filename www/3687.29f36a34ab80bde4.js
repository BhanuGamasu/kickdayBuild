"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(w,p,r)=>{r.r(p),r.d(p,{LoginPageModule:()=>x});var m=r(3609),c=r(209),n=r(6242),h=r(185),d=r(6814),g=r(9004),s=r(95);function f(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-input",11),n.NdJ("ngModelChange",function(i){n.CHM(t);const l=n.oxw(2);return n.KtG(l.confirmPin=i)}),n.qZA()}if(2&o){const t=n.oxw(2);n.Q6J("ngModel",t.confirmPin)}}function _(o,a){if(1&o&&(n.TgZ(0,"ion-row")(1,"ion-col",4),n.YNc(2,f,1,1,"ion-input",10),n.qZA()()),2&o){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",t.showConfirmPin)}}function P(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-button",12),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.login())}),n._uU(1,"Login"),n.qZA()}}function C(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-button",12),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.createCustomer())}),n._uU(1,"Create"),n.qZA()}}const M=[{path:"",component:(()=>{var o;class a{constructor(e,i){this.route=e,this.auth=i,this.profileType="customer",this.showConfirmPin=!1,this.mobileNumber="",this.pin="",this.confirmPin=""}ngOnInit(){}login(){this.auth.login({mobile:this.mobileNumber,pin:this.pin}).subscribe(e=>{e.success&&(localStorage.setItem("token",JSON.stringify(e.token)),localStorage.setItem("userData",JSON.stringify(e.userData)),this.navigatePages())},e=>{console.log("userNot found , show error")})}createAccount(){this.showConfirmPin=!0}goBackToLogin(){this.showConfirmPin=!1}createCustomer(){this.pin==this.confirmPin?this.auth.createCustomer({mobile:this.mobileNumber,pin:this.pin,role:this.profileType}).subscribe(e=>{e.success&&(localStorage.setItem("token",JSON.stringify(e.token)),localStorage.setItem("userData",JSON.stringify(e.userData)),this.navigatePages())},e=>{console.log(e)}):console.log("pin not matched, show error message")}navigatePages(){let e=localStorage.getItem("userData");if(e){let i=JSON.parse(e);"admin"==i.role?this.route.navigate(["/adminDashboard"]):"maker"==i.role?this.route.navigate(["/makerDashboard"]):"customer"==i.role&&this.route.navigate([i.firstTimeLogin?"/customerProfile":"/customerListings"])}}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(c.F0),n.Y36(h.u))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-login"]],decls:27,vars:6,consts:[[1,"login-container"],[1,"kd_center_align"],["src","../../assets/sample_food_img.webp","alt","Food Image",1,"login-image"],[1,"login-heading"],[1,"kd_margin_bott_10"],["type","tel","pattern","[0-9]*","minlength","10","maxlength","10","placeholder","Enter Mobile",1,"input_selection",3,"ngModel","ngModelChange"],["type","tel","pattern","[0-9]*","minlength","6","maxlength","6","placeholder","Enter Pin",1,"input_selection",3,"ngModel","ngModelChange"],[4,"ngIf"],["expand","full","shape","round","color","primary",3,"click",4,"ngIf"],[1,"line",3,"click"],["class","input_selection","pattern","[0-9]*","minlength","6","maxlength","6","placeholder","Confirm Pin",3,"ngModel","ngModelChange",4,"ngIf"],["pattern","[0-9]*","minlength","6","maxlength","6","placeholder","Confirm Pin",1,"input_selection",3,"ngModel","ngModelChange"],["expand","full","shape","round","color","primary",3,"click"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0)(1,"ion-row")(2,"ion-col",1),n._UZ(3,"img",2),n.qZA()(),n.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-text",3),n._uU(7,"Mobile Number"),n.qZA()()(),n.TgZ(8,"ion-row")(9,"ion-col",4)(10,"ion-input",5),n.NdJ("ngModelChange",function(u){return i.mobileNumber=u}),n.qZA()()(),n.TgZ(11,"ion-row")(12,"ion-col")(13,"ion-text",3),n._uU(14,"Pin Setup"),n.qZA()()(),n.TgZ(15,"ion-row")(16,"ion-col",4)(17,"ion-input",6),n.NdJ("ngModelChange",function(u){return i.pin=u}),n.qZA()()(),n.YNc(18,_,3,1,"ion-row",7),n.TgZ(19,"ion-row")(20,"ion-col"),n.YNc(21,P,2,0,"ion-button",8)(22,C,2,0,"ion-button",8),n.qZA()(),n.TgZ(23,"ion-row")(24,"ion-col",1)(25,"ion-text",9),n.NdJ("click",function(){return i.showConfirmPin?i.goBackToLogin():i.createAccount()}),n._uU(26),n.qZA()()()()),2&e&&(n.xp6(10),n.Q6J("ngModel",i.mobileNumber),n.xp6(7),n.Q6J("ngModel",i.pin),n.xp6(1),n.Q6J("ngIf","customer"===i.profileType),n.xp6(3),n.Q6J("ngIf",!i.showConfirmPin),n.xp6(1),n.Q6J("ngIf",i.showConfirmPin),n.xp6(4),n.hij(" ",i.showConfirmPin?"Go To Login":"Create Account"," "))},dependencies:[d.O5,g.YG,g.wI,g.pK,g.Nd,g.yW,g.j9,s.JJ,s.wO,s.nD,s.c5,s.On],styles:[".login-container[_ngcontent-%COMP%]{min-width:390px;margin:auto;padding:15px}.login-image[_ngcontent-%COMP%]{width:100%;border-radius:10px;margin-bottom:20px}.login-heading[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.input_selection[_ngcontent-%COMP%]{border:solid 1px black;border-radius:7px;min-height:48px;box-shadow:none;--padding-start: 10px;margin-top:8px}.line[_ngcontent-%COMP%]{font-size:20px!important;font-weight:700;color:#00f;text-align:end}"]}),a})()}];let b=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[c.Bz.forChild(M),c.Bz]}),a})(),x=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[m.m,b]}),a})()}}]);