"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[153],{153:(I,p,s)=>{s.r(p),s.d(p,{CustomerProfilePageModule:()=>N});var f=s(3609),d=s(2436),h=s(5861),u=s(95),e=s(5678),_=s(6593),b=s(5565),P=s(185),v=s(6814),l=s(9004);function x(i,c){if(1&i&&e._UZ(0,"img",20),2&i){const n=e.oxw();let t;e.Q6J("src",null==(t=n.userDataForm.get("image"))?null:t.value,e.LSH)}}function C(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"label",21)(1,"input",22),e.NdJ("change",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.onFileSelected(o))}),e.qZA(),e._uU(2," Choose Photo* "),e.qZA()}}function Z(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"label",23)(1,"input",22),e.NdJ("change",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.onFileSelected(o))}),e.qZA(),e._uU(2," Change Photo "),e.qZA()}}function y(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"ion-footer",24)(1,"ion-card",25)(2,"ion-row")(3,"ion-col",26),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.goToOrders())}),e._UZ(4,"ion-ripple-effect",27)(5,"ion-icon",28),e.TgZ(6,"ion-text",29),e._uU(7,"Orders"),e.qZA()(),e.TgZ(8,"ion-col",26),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.goToDashboard())}),e._UZ(9,"ion-ripple-effect",27)(10,"ion-icon",30),e.TgZ(11,"ion-text",29),e._uU(12,"Listings"),e.qZA()(),e.TgZ(13,"ion-col",31),e._UZ(14,"ion-ripple-effect",27)(15,"ion-icon",32),e.TgZ(16,"ion-text",29),e._uU(17,"Profile"),e.qZA()()()()()}}const T=[{path:"",component:(()=>{var i;class c{constructor(t,o,a,r,m){this.router=t,this.fb=o,this.sanitizer=a,this.adminService=r,this.authService=m,this.edit=!1,this.userDataForm=this.fb.group({userName:["",u.kI.required],email:["",u.kI.required],mobile:[""],city:["",u.kI.required],image:["",u.kI.required],imageName:[""],imageId:""})}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,h.Z)(function*(){let o=localStorage.getItem("userData");if(t.userData=JSON.parse(o)||{},t.userData.profileId){var a;t.edit=!0;let r=yield t.authService.getLogoImageById({fileId:t.userData.profileId}),m=null==r||null===(a=r.data)||void 0===a?void 0:a.name,g="";r.success||(g=""),"svg+xml"==r.data.mimetype&&(g=yield t.sanitizer.bypassSecurityTrustResourceUrl(`data:image/svg+xml;base64,${r.data.data}`)),g=`data:image/jpg;base64,${r.data.data}`,t.userDataForm.patchValue({image:g,imageName:m,imageId:t.userData.profileId})}t.userData&&t.userDataForm.patchValue({userName:t.userData.userName,email:t.userData.email,mobile:t.userData.mobileNumber,city:t.userData.address})})()}onFileSelected(t){const a=t.target.files;a&&a.length>0&&this.uploadPhoto(a[0])}uploadPhoto(t){if(t&&this.userDataForm&&this.userDataForm.get("image")){const o=new FileReader;o.onload=a=>{this.userDataForm.patchValue({image:a.target.result,imageName:t.name,imageId:""})},o.readAsDataURL(t)}}saveProfile(){this.adminService.updateCustomerDetails(this.userDataForm.value).subscribe(o=>{o.success&&o.data&&(localStorage.setItem("userData",JSON.stringify(o.data)),this.router.navigate(["/customerListings"]))},o=>{console.log("userNot found , show error")})}goToOrders(){this.router.navigate(["/orders"])}goToDashboard(){this.router.navigate(["/customerListings"])}logOut(){this.authService.logOut({}).subscribe(t=>{localStorage.clear(),this.router.navigate(["/login"])},t=>{console.log(t)})}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(d.F0),e.Y36(u.qu),e.Y36(_.H7),e.Y36(b.l),e.Y36(P.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer-profile"]],decls:37,vars:6,consts:[[3,"fullscreen"],[2,"height","100%","padding","20px"],[2,"border-bottom","none !important","width","100%","justify-content","end"],["name","log-out-outline",2,"height","30px","width","30px",3,"click"],[2,"border-bottom","none !important","width","100%"],[1,"kd_col_center_align",2,"flex-direction","column"],[1,"profile-photo-container"],[3,"src",4,"ngIf"],["class","upload-label",4,"ngIf"],["class","change-file-label",4,"ngIf"],[3,"formGroup"],[1,"input_selection",2,"display","grid","align-items","center"],["position","stacked"],["formControlName","userName","aria-label","Name","placeholder","Enter Name"],["formControlName","email","aria-label","Email","placeholder","Enter Email"],["formControlName","mobile","aria-label","Mobile","placeholder","Enter Mobile"],["formControlName","city","aria-label","Location","placeholder","Enter Location"],[1,"kd_save_button",3,"click"],[2,"height","100px"],["style","bottom: 0px; position: absolute",4,"ngIf"],[3,"src"],[1,"upload-label"],["type","file","accept","image/*",3,"change"],[1,"change-file-label"],[2,"bottom","0px","position","absolute"],[2,"margin","0px","border-radius","0px","padding","10px"],[1,"kd_flex","kd_flex_col_center","ion-activatable","ripple-parent",3,"click"],[1,"ripple_background"],["name","bag-handle-outline",1,"footer_icon_styles"],[1,"icon-text_styles"],["name","list-circle-outline",1,"footer_icon_styles"],[1,"kd_flex","kd_flex_col_center","ion-activatable","ripple-parent"],["name","person-circle-outline",1,"footer_icon_styles"]],template:function(t,o){if(1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"ion-row",2)(3,"ion-icon",3),e.NdJ("click",function(){return o.logOut()}),e.qZA()(),e.TgZ(4,"ion-row",4)(5,"ion-col")(6,"div",5)(7,"div",6),e.YNc(8,x,1,1,"img",7)(9,C,3,0,"label",8),e.qZA(),e.YNc(10,Z,3,0,"label",9),e.qZA()()(),e.TgZ(11,"form",10)(12,"div")(13,"ion-card",11)(14,"ion-item")(15,"ion-label",12),e._uU(16,"Name*"),e.qZA(),e._UZ(17,"ion-input",13),e.qZA()(),e.TgZ(18,"ion-card",11)(19,"ion-item")(20,"ion-label",12),e._uU(21,"Email*"),e.qZA(),e._UZ(22,"ion-input",14),e.qZA()(),e.TgZ(23,"ion-card",11)(24,"ion-item")(25,"ion-label",12),e._uU(26,"Mobile*"),e.qZA(),e._UZ(27,"ion-input",15),e.qZA()(),e.TgZ(28,"ion-card",11)(29,"ion-item")(30,"ion-label",12),e._uU(31,"Location*"),e.qZA(),e._UZ(32,"ion-input",16),e.qZA()()()(),e.TgZ(33,"ion-button",17),e.NdJ("click",function(){return o.saveProfile()}),e._uU(34,"Save"),e.qZA(),e._UZ(35,"div",18),e.qZA()(),e.YNc(36,y,18,0,"ion-footer",19)),2&t){let a,r,m;e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("ngIf",null==o.userDataForm||null==(a=o.userDataForm.get("image"))?null:a.value),e.xp6(1),e.Q6J("ngIf",!(null!=(r=o.userDataForm.get("image"))&&r.value)),e.xp6(1),e.Q6J("ngIf",null==(m=o.userDataForm.get("image"))?null:m.value),e.xp6(1),e.Q6J("formGroup",o.userDataForm),e.xp6(25),e.Q6J("ngIf",o.edit)}},dependencies:[v.O5,l.YG,l.PM,l.wI,l.W2,l.fr,l.gu,l.pK,l.Ie,l.Q$,l.H$,l.Nd,l.yW,l.j9,u._Y,u.JJ,u.JL,u.sg,u.u],styles:[".input_selection[_ngcontent-%COMP%]{border:solid 2px black;border-radius:14px;height:70px;margin:20px 0;padding:15px 10px 10px;box-shadow:none}.profile-photo-container[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;overflow:hidden}.profile-photo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.upload-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;width:100%;height:100%;cursor:pointer;border:2px dashed #ccc;border-radius:50%}.upload-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.change-file-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:150px;height:40px;cursor:pointer;background-color:#f5f5f5;border:2px dashed #ccc;border-radius:4px;margin-top:10px}.change-file-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}"]}),c})()}];let D=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(T),d.Bz]}),c})(),N=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.m,D]}),c})()}}]);